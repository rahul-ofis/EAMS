{% extends "base.html" %}

{% block content %}
<div class="forms-container">
    <h2>All Employee Submissions</h2>
    <div class="submissions-list">
        {% for submission in submissions %}
        <div class="submission-card">
            <div class="submission-header">
                Submitted by: {{ submission.employee_name }}
                <span class="submission-date">
                    {{ submission.created_at.strftime('%B %d, %Y, %I:%M:%S %p') }}
                </span>
            </div>
            {% for category, messages in submission.data.items() %}
            {% if not category.endswith('-measure') and not category.endswith('-completion') and not category.endswith('-comments') and not category.endswith('-self-rating') and not category.endswith('-manager-rating') and not category.endswith('-manager-comments') %}
            <div class="submission-item">
                <strong>{{ category }}:</strong>
                <ul>
                    {% for message in messages %}
                    <li>{{ message }}</li>
                    {% endfor %}
                </ul>
                <div class="form-group">
                    <label>Measure of Success</label>
                    <input type="text" value="{{ submission.data[category + '-measure'] }}" disabled>
                </div>
                <div class="form-group">
                    <label>Percentage of Completion</label>
                    <input type="text" value="{{ submission.data[category + '-completion'] }}" disabled>
                </div>
                <div class="form-group">
                    <label>Comments on Achievement</label>
                    <textarea disabled>{{ submission.data[category + '-comments'] }}</textarea>
                </div>
                <div class="form-group">
                    <label>Self-Assessment Rating</label>
                    <input type="text" value="{{ submission.data[category + '-self-rating'] }}" disabled>
                </div>
                <div class="form-group">
                    <label>
                        {% if submission.employee_role == 'manager' %}
                        HR Rating
                        {% else %}
                        Reporting Manager Rating
                        {% endif %}
                    </label>
                    <input type="text" value="{{ submission.data[category + '-manager-rating'] }}" disabled>
                </div>
                <div class="form-group">
                    <label>
                        {% if submission.employee_role == 'manager' %}
                        HR Comments
                        {% else %}
                        Comments by Reporting Manager
                        {% endif %}
                    </label>
                    <textarea disabled>{{ submission.data[category + '-manager-comments'] }}</textarea>
                </div>
            </div>
            {% endif %}
            {% endfor %}
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
